<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>العداد الذكي للأذكار</title>
<style>
  body {
    font-family: "Tajawal", sans-serif;
    background-color: #11141a;
    color: #e4e4e4;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  .app {
    margin: 30px auto;
    max-width: 400px;
    padding: 20px;
    background: #1b1f25;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.4);
  }
  h1 {
    margin-bottom: 20px;
  }
  .counter {
    margin: 20px 0;
    font-size: 2.5em;
    border: 3px solid #0078d7;
    border-radius: 50%;
    width: 120px;
    height: 120px;
    line-height: 120px;
    margin-inline: auto;
    position: relative;
    user-select: none;
  }
  button {
    padding: 10px 20px;
    border: none;
    margin: 5px;
    border-radius: 8px;
    background: #0078d7;
    color: white;
    font-size: 1em;
    cursor: pointer;
  }
  button:hover { background: #0a84ff; }
  button.active { background: #145ea8; }

  .limit-container {
    background: #222831;
    padding: 10px;
    border-radius: 10px;
    margin-top: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  input[type=range] {
    width: 150px;
  }

  select {
    padding: 6px;
    border-radius: 6px;
    border: none;
    background: #2b3038;
    color: #fff;
  }
</style>
</head>
<body>
<main class="app">
  <div style="text-align:center; margin-bottom:12px;">
    <img src="FullLogo.jpg" alt="Athkar Hub Logo"
         style="width:160px; max-width:60%; border-radius:12px; opacity:0.9;">
  </div>

  <h1>العداد الذكي للأذكار</h1>

  <div id="presets"></div>

  <div class="counter">
    <span id="count">0</span>
  </div>

  <div>
    <button id="minusBtn">−</button>
    <button id="start">ابدأ</button>
    <button id="stop">إيقاف</button>
    <button id="plusBtn">+</button>
  </div>

  <div class="limit-container">
    <span id="limitLabel">(0 = بدون حد)</span>
    <input type="range" id="limit" min="0" max="100" value="0">
    <button id="limitPlus">+</button>
    <button id="limitMinus">−</button>
  </div>

  <div style="margin-top:10px;">
    <label>الفاصل الزمني:</label>
    <select id="interval">
      <option value="1">1 ثانية</option>
      <option value="2">2 ثانية</option>
      <option value="3">3 ثواني</option>
      <option value="4">4 ثواني</option>
      <option value="5">5 ثواني</option>
    </select>
  </div>

  <p id="eta" style="margin-top:15px; opacity:0.8;"></p>
</main>

<script>
let count=0, limit=0, intervalSec=1, running=false, intervalId=null;
const $count=document.getElementById("count");
const $limit=document.getElementById("limit");
const $limitLabel=document.getElementById("limitLabel");
const $interval=document.getElementById("interval");
const $start=document.getElementById("start");
const $stop=document.getElementById("stop");
const $eta=document.getElementById("eta");
const audio=new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");

function updateLabel(){
  $count.textContent=count;
  $limitLabel.textContent = `(الحد = ${limit==0?"بدون حد":limit})`;
}

function refreshETA(){
  if(limit>0 && count<limit){
    const remain=limit-count;
    const sec=remain*intervalSec;
    $eta.textContent = `الوقت المتبقي التقريبي: ${Math.floor(sec/60)} دقيقة و ${sec%60} ثانية`;
  } else $eta.textContent="";
}

function start(){
  if(running) return;
  running=true;
  $start.classList.add("active");
  intervalSec=parseInt($interval.value);
  intervalId=setInterval(()=>{
    if(limit>0 && count>=limit){
      stop();
      audio.play();
      alert("تم الوصول إلى الحد!");
      return;
    }
    count++;
    updateLabel();
    refreshETA();
  }, intervalSec*1000);
}

function stop(){
  running=false;
  $start.classList.remove("active");
  clearInterval(intervalId);
}

$start.onclick=start;
$stop.onclick=stop;
$limit.oninput=()=>{limit=parseInt($limit.value);updateLabel();refreshETA();};
$interval.onchange=()=>{intervalSec=parseInt($interval.value);refreshETA();};
document.getElementById("limitPlus").onclick=()=>{$limit.value=Math.min(100,parseInt($limit.value)+1);$limit.oninput();};
document.getElementById("limitMinus").onclick=()=>{$limit.value=Math.max(0,parseInt($limit.value)-1);$limit.oninput();};
document.getElementById("plusBtn").onclick=()=>{if(limit>0&&count>=limit){audio.play();alert("تم الوصول إلى الحد!");return;}count++;updateLabel();refreshETA();};
document.getElementById("minusBtn").onclick=()=>{count=Math.max(0,count-1);updateLabel();refreshETA();};

updateLabel();
</script>
</body>
</html>
